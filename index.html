<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultimate Snake Game</title>

<style>
:root {
  --bg: #000;
  --snake: #00ffd5;
  --food: red;
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--snake);
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  text-align: center;
}

canvas {
  background: #111;
  border: 3px solid var(--snake);
}

button {
  padding: 6px 12px;
  margin: 5px;
  font-size: 14px;
  cursor: pointer;
}

.controls button {
  width: 60px;
  height: 40px;
}

.leaderboard {
  margin-top: 10px;
  font-size: 14px;
}
</style>
</head>

<body>

<div class="container">
  <h2>üêç Ultimate Snake</h2>

  <canvas id="game" width="360" height="360"></canvas>

  <div>Score: <span id="score">0</span></div>

  <button onclick="toggleTheme()">Change Theme</button>
  <button onclick="restart()">Restart</button>

  <!-- Mobile Controls -->
  <div class="controls">
    <button onclick="setDir('UP')">‚¨ÜÔ∏è</button><br>
    <button onclick="setDir('LEFT')">‚¨ÖÔ∏è</button>
    <button onclick="setDir('DOWN')">‚¨áÔ∏è</button>
    <button onclick="setDir('RIGHT')">‚û°Ô∏è</button>
  </div>

  <div class="leaderboard">
    <h4>üèÜ Top Scores</h4>
    <ol id="board"></ol>
  </div>
</div>

<!-- Sounds -->
<audio id="eat" src="https://assets.mixkit.co/sfx/preview/mixkit-game-ball-tap-2073.mp3"></audio>
<audio id="over" src="https://assets.mixkit.co/sfx/preview/mixkit-player-losing-or-failing-2042.mp3"></audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const box = 20;

let snake, aiSnake, food, speedFood, dir, score, game;
let theme = 0;

function start() {
  snake = [{x:180,y:180}];
  aiSnake = [{x:0,y:0}];
  dir = "RIGHT";
  score = 0;
  food = randFood();
  speedFood = randFood();
  document.getElementById("score").innerText = score;
  game = setInterval(draw, 150);
  updateBoard();
}

function randFood() {
  return {
    x: Math.floor(Math.random()*18)*box,
    y: Math.floor(Math.random()*18)*box
  };
}

function setDir(d) {
  if (d === "LEFT" && dir !== "RIGHT") dir = d;
  if (d === "RIGHT" && dir !== "LEFT") dir = d;
  if (d === "UP" && dir !== "DOWN") dir = d;
  if (d === "DOWN" && dir !== "UP") dir = d;
}

document.addEventListener("keydown", e => {
  if (e.key.includes("Arrow")) setDir(e.key.replace("Arrow","").toUpperCase());
});

function draw() {
  ctx.clearRect(0,0,360,360);

  // Player snake
  snake.forEach(s => {
    ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue("--snake");
    ctx.fillRect(s.x,s.y,box,box);
  });

  // AI snake
  aiSnake.forEach(s => {
    ctx.fillStyle = "#ff00ff";
    ctx.fillRect(s.x,s.y,box,box);
  });

  // Food
  ctx.fillStyle = "red";
  ctx.fillRect(food.x,food.y,box,box);

  // Speed food
  ctx.fillStyle = "yellow";
  ctx.fillRect(speedFood.x,speedFood.y,box,box);

  let head = {...snake[0]};
  if (dir==="LEFT") head.x-=box;
  if (dir==="RIGHT") head.x+=box;
  if (dir==="UP") head.y-=box;
  if (dir==="DOWN") head.y+=box;

  // Collision
  if (head.x<0||head.y<0||head.x>=360||head.y>=360) return gameOver();

  if (head.x===food.x && head.y===food.y) {
    score++;
    document.getElementById("eat").play();
    food = randFood();
  } else if (head.x===speedFood.x && head.y===speedFood.y) {
    score+=2;
    document.getElementById("eat").play();
    clearInterval(game);
    game = setInterval(draw,100);
    speedFood = randFood();
  } else {
    snake.pop();
  }

  snake.unshift(head);

  // AI movement (simple)
  let aiHead = {...aiSnake[0]};
  if (aiHead.x < food.x) aiHead.x+=box;
  else if (aiHead.x > food.x) aiHead.x-=box;
  else if (aiHead.y < food.y) aiHead.y+=box;
  else aiHead.y-=box;

  aiSnake.unshift(aiHead);
  aiSnake.pop();
}

function gameOver() {
  document.getElementById("over").play();
  clearInterval(game);
  saveScore();
}

function restart() {
  clearInterval(game);
  start();
}

function toggleTheme() {
  theme = (theme+1)%2;
  if (theme===0) {
    document.documentElement.style.setProperty("--bg","#000");
    document.documentElement.style.setProperty("--snake","#00ffd5");
  } else {
    document.documentElement.style.setProperty("--bg","#1a0033");
    document.documentElement.style.setProperty("--snake","#ff66ff");
  }
}

function saveScore() {
  let scores = JSON.parse(localStorage.getItem("scores")||"[]");
  scores.push(score);
  scores.sort((a,b)=>b-a);
  scores = scores.slice(0,5);
  localStorage.setItem("scores",JSON.stringify(scores));
  updateBoard();
}

function updateBoard() {
  let scores = JSON.parse(localStorage.getItem("scores")||"[]");
  const list = document.getElementById("board");
  list.innerHTML = "";
  scores.forEach(s=>{
    let li = document.createElement("li");
    li.innerText = s;
    list.appendChild(li);
  });
}

start();
</script>
</body>
</html>
