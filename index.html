<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake Game ‚Äì Speed & Level</title>

<style>
body {
  margin: 0;
  background: radial-gradient(circle, #020024, #000);
  color: #00ffd5;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  text-align: center;
}

canvas {
  background: #000;
  border: 3px solid #00ffd5;
  box-shadow: 0 0 25px #00ffd5;
}

.controls {
  margin-top: 10px;
}

select, input[type=range], button {
  margin: 5px;
  padding: 6px;
  font-size: 14px;
}
</style>
</head>

<body>

<div class="container">
  <h2>üêç Snake ‚Äì Speed & Level</h2>

  <canvas id="game" width="360" height="360"></canvas>

  <div>Score: <span id="score">0</span></div>

  <div class="controls">
    <label>
      Level:
      <select id="level" onchange="changeLevel()">
        <option value="180">Easy</option>
        <option value="130">Medium</option>
        <option value="90">Hard</option>
      </select>
    </label>

    <br>

    <label>
      Speed:
      <input type="range" min="60" max="220" value="140" id="speed" oninput="changeSpeed()">
    </label>

    <br>
    <button onclick="restart()">Restart</button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const box = 20;

let snake, food, dir, score, game;
let speed = 140;

function start() {
  snake = [{x:180,y:180}];
  food = randomFood();
  dir = "RIGHT";
  score = 0;
  document.getElementById("score").innerText = score;

  clearInterval(game);
  game = setInterval(draw, speed);
}

function randomFood() {
  return {
    x: Math.floor(Math.random()*18)*box,
    y: Math.floor(Math.random()*18)*box
  };
}

document.addEventListener("keydown", e => {
  if (e.key==="ArrowLeft" && dir!=="RIGHT") dir="LEFT";
  if (e.key==="ArrowRight" && dir!=="LEFT") dir="RIGHT";
  if (e.key==="ArrowUp" && dir!=="DOWN") dir="UP";
  if (e.key==="ArrowDown" && dir!=="UP") dir="DOWN";
});

function drawCircle(x,y,r,color){
  ctx.fillStyle=color;
  ctx.beginPath();
  ctx.arc(x,y,r,0,Math.PI*2);
  ctx.fill();
}

function drawHead(head){
  const cx = head.x + box/2;
  const cy = head.y + box/2;

  drawCircle(cx,cy,box/2,"#00ffd5");

  // eyes
  drawCircle(cx+(dir==="LEFT"?-4:4), cy-4, 2, "#000");
  drawCircle(cx+(dir==="LEFT"?-4:4), cy+4, 2, "#000");

  // mouth
  ctx.strokeStyle="#000";
  ctx.lineWidth=2;
  ctx.beginPath();
  ctx.arc(cx,cy,6,0.2,1.2);
  ctx.stroke();
}

function draw() {
  ctx.clearRect(0,0,360,360);

  for (let i=1;i<snake.length;i++) {
    drawCircle(
      snake[i].x+box/2,
      snake[i].y+box/2,
      box/2-2,
      "#00bfa5"
    );
  }

  drawHead(snake[0]);

  drawCircle(food.x+box/2, food.y+box/2, box/2, "red");

  let head = {...snake[0]};
  if (dir==="LEFT") head.x-=box;
  if (dir==="RIGHT") head.x+=box;
  if (dir==="UP") head.y-=box;
  if (dir==="DOWN") head.y+=box;

  if (
    head.x<0||head.y<0||
    head.x>=360||head.y>=360||
    snake.some(p=>p.x===head.x&&p.y===head.y)
  ) {
    clearInterval(game);
    return;
  }

  if (head.x===food.x && head.y===food.y) {
    score++;
    document.getElementById("score").innerText = score;
    food = randomFood();

    // auto speed up every 5 points
    if (score % 5 === 0 && speed > 70) {
      speed -= 10;
      restartInterval();
    }
  } else {
    snake.pop();
  }

  snake.unshift(head);
}

function restartInterval() {
  clearInterval(game);
  game = setInterval(draw, speed);
}

function changeSpeed() {
  speed = document.getElementById("speed").value;
  restartInterval();
}

function changeLevel() {
  speed = document.getElementById("level").value;
  document.getElementById("speed").value = speed;
  restartInterval();
}

function restart(){
  start();
}

start();
</script>

</body>
</html>
